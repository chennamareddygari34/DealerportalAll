<div class="container">
  <div class="dashboard-content">
    <!-- Card for stats -->
    <mat-card>
      <mat-card-title>
        <mat-button-toggle-group
          [value]="selectedRange"
          (change)="onRangeChange($event.value)"
          exclusive
        >
          <mat-button-toggle value="monthToDate">Month to Date</mat-button-toggle>
          <mat-button-toggle value="last30Days">Last 30 Days</mat-button-toggle>
        </mat-button-toggle-group>
      </mat-card-title>
      <mat-card-content>
        <div class="stats">
          <div class="stat">Applications Sent: {{ applicationsSent }}</div>
          <div class="stat">Applications Pending: {{ applicationsPending }}</div>
          <div class="stat">Applications Approved: {{ applicationsApproved }}</div>
          <div class="stat">Contracts Pending: {{ contractsPending }}</div>
          <div class="stat">Contracts Funded: {{ contractsFunded }}</div>
          <div class="stat">Total Payments to Dealer: {{ totalPaymentsToDealer }}</div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Card for Most Recent Deals -->
    <mat-card>
      <div class="card-header">
        <mat-card-title>Most Recent Deals</mat-card-title>
        <button pButton type="button" label="View All Deals" (click)="getAllApplications()" class="button view-all-deals"></button>
      </div>
      <mat-card-content>
        <p-table [value]="deals" [paginator]="true" [rows]="6" (onLazyLoad)="loadDealsLazy($event)" [totalRecords]="totalRecords" class="p-table">
          <ng-template pTemplate="header">
            <tr>
              <th>App ID</th>
              <th>Applicant</th>
              <th>Applicant Date</th>
              <th>Contract Date</th>
              <th>Year</th>
              <th>Make</th>
              <th>Model</th>
              <th>Status</th>
              <th>Last Update</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-deal>
            <tr>
              <td>{{ deal.applicantId }}</td>
              <td>{{ deal.applicant1 }}</td>
              <td>{{ deal.applicantDate }}</td>
              <td>{{ deal.contractDate }}</td>
              <td>{{ deal.year }}</td>
              <td>{{ deal.make }}</td>
              <td>{{ deal.model }}</td>
              <td>{{ deal.status }}</td>
              <td>{{ deal.lastUpdate }}</td>
            </tr>
          </ng-template>
        </p-table>
      </mat-card-content>
    </mat-card>

    <!-- Conditionally show Create New Application button if vendorId is set -->
    <div class="button-row" *ngIf="vendorId">
      <button pButton type="button" label="Create New Application" (click)="navigateToApplicantCreation()" class="button create-new-applicant"></button>
    </div>
    
  </div>
</div>
